# 笔记本电脑数据分析系统

## 项目概述

笔记本电脑数据分析系统是一个基于Flask和MySQL的Web应用，用于分析笔记本电脑的销售数据。系统提供了多种数据分析功能，包括品牌分析、价格分析、销量分析等，帮助用户了解笔记本电脑市场的趋势和特点。

## 功能特点

- **数据可视化**：通过图表直观展示笔记本电脑的价格分布、品牌分布、内存分布等
- **品牌分析**：分析不同品牌笔记本电脑的市场份额和价格特点
- **价格分析**：分析不同价格区间的笔记本电脑数量和销量情况
- **销量预测**：基于机器学习模型预测笔记本电脑的销量
- **价格预测**：根据品牌、配置等因素预测笔记本电脑的价格
- **数据筛选**：支持按品牌、价格区间、内存、CPU等条件筛选数据

# 笔记本电脑数据分析系统

## 系统概述

笔记本电脑数据分析系统是一个基于Web的应用程序，用于分析京东平台上的笔记本电脑数据。系统提供了丰富的数据分析功能，包括基础统计分析、数据可视化、价格预测以及高级分析功能。

## 技术架构

- **前端**：HTML, CSS, JavaScript, Chart.js, TailwindCSS
- **后端**：Flask, SQLAlchemy
- **数据库**：MySQL
- **数据分析**：Pandas, NumPy, Scikit-learn
- **高级分析**：KMeans聚类, 情感分析, 价格趋势预测

## 功能介绍

### 基础功能

1. **数据概览**：展示笔记本电脑数据的基本统计信息，包括总商品数、平均价格、总销量和品牌数量。

2. **品牌分析**：分析各品牌的市场份额、平均价格和销量情况，以表格形式展示。

3. **数据可视化**：通过交互式图表展示价格分布、品牌市场份额、价格与销量关系、内存分布和CPU分布等信息。

4. **价格预测**：基于机器学习模型，根据品牌、内存和CPU等特征预测笔记本电脑价格。

### 高级分析功能

1. **竞品分析**：
   - 选择目标品牌，分析其竞争对手的产品数量、平均价格和销量情况
   - 计算与竞争对手的价格差异和销量差异百分比
   - 直观展示竞争格局，帮助了解市场竞争态势

2. **价格趋势预测**：
   - 基于历史价格数据，预测未来一段时间内的价格走势
   - 支持按品牌和内存筛选，预测特定类型产品的价格趋势
   - 可视化展示历史价格和预测价格，直观了解价格变化趋势

3. **用户评价情感分析**：
   - 分析用户评价的情感倾向，计算情感得分
   - 展示积极、中性和消极评价的分布情况
   - 提取评价中的关键词，了解用户关注的产品特点

4. **市场细分聚类**：
   - 使用K-means聚类算法，自动将笔记本电脑分为不同的市场细分
   - 分析每个细分市场的特点，包括价格范围、销量情况和主要品牌
   - 通过气泡图直观展示不同细分市场的分布情况

## 安装与运行

### 环境要求

- Python 3.8+
- MySQL 5.7+

### 安装步骤

1. 克隆或下载项目代码
2. 安装依赖包：
   ```bash
   pip install -r requirements.txt
   ```
3. 配置数据库连接：
   - 修改`config.py`文件中的数据库连接信息
   - 确保MySQL服务已启动
4. 初始化数据库：
   ```bash
   flask init-db
   ```
   这将创建所有必要的数据库表，并创建一个默认管理员账户（用户名：admin，密码：admin123）
5. 导入数据：
   ```bash
   flask import-csv
   ```
6. 启动应用：
   ```bash
   flask run
   ```
7. 在浏览器中访问：`http://127.0.0.1:5000`
8. 使用默认管理员账户登录，并立即修改默认密码

## 使用指南

### 基础功能使用

1. **数据概览**：点击"开始分析"按钮，系统将加载数据并显示基本统计信息。
2. **品牌分析**：在数据概览页面查看品牌分析表格，了解各品牌的市场情况。
3. **数据可视化**：切换图表标签页，查看不同维度的数据可视化结果。
4. **价格预测**：在价格预测页面选择品牌、内存和CPU，点击"预测价格"按钮获取预测结果。

### 用户管理

1. **登录系统**：访问首页时，系统会要求用户登录。如果没有账号，可以点击"立即注册"创建新账号。

2. **用户注册**：在注册页面填写用户名、邮箱和密码，完成注册后即可登录系统。

3. **管理员命令**：系统提供了一些命令行工具用于管理用户：
   - 创建管理员用户：
     ```bash
     flask --app admin create-admin <用户名> <邮箱> <密码>
     ```
   - 列出所有用户：
     ```bash
     flask --app admin list-users
     ```
   - 重置用户密码：
     ```bash
     flask --app admin reset-password <用户名> <新密码>
     ```

### 高级分析功能使用

1. **竞品分析**：
   - 在高级分析页面选择"竞品分析"标签页
   - 从下拉菜单选择目标品牌
   - 点击"分析"按钮获取竞品分析结果
   - 查看目标品牌与竞争对手的对比数据

2. **价格趋势预测**：
   - 在高级分析页面选择"价格趋势预测"标签页
   - 选择品牌、内存和预测天数
   - 点击"预测"按钮获取价格趋势预测结果
   - 查看价格趋势图表和变化分析

3. **用户评价情感分析**：
   - 在高级分析页面选择"用户评价分析"标签页
   - 选择品牌
   - 点击"分析"按钮获取情感分析结果
   - 查看情感得分、评价分布和关键词分析

4. **市场细分聚类**：
   - 在高级分析页面选择"市场细分聚类"标签页
   - 点击"分析"按钮获取聚类分析结果
   - 查看不同市场细分的特点和分布

## API接口文档

系统提供以下API接口，可用于二次开发或数据集成：

### 基础数据接口

- **GET /api/data**：获取所有笔记本电脑数据
- **GET /api/brand_analysis**：获取品牌分析数据
- **GET /api/ram_analysis**：获取内存分析数据
- **GET /api/cpu_analysis**：获取CPU分析数据
- **GET /api/price_range_analysis**：获取价格区间分析数据
- **GET /api/sales_analysis**：获取销量分析数据
- **GET /api/price_sales_correlation**：获取价格与销量关系分析数据

### 高级分析接口

- **GET /api/competitive_analysis**：获取竞品分析数据
  - 参数：brand（品牌名称，可选）

- **GET /api/price_trend_prediction**：获取价格趋势预测数据
  - 参数：brand（品牌名称，可选）、ram（内存大小，可选）、days（预测天数，默认30）

- **GET /api/sentiment_analysis**：获取用户评价情感分析数据
  - 参数：brand（品牌名称，可选）

- **GET /api/laptop_clustering**：获取市场细分聚类分析数据

## 安装步骤

1. 克隆或下载本项目到本地

2. 安装所需依赖包
```bash
pip install -r requirements.txt
```

3. 配置MySQL数据库
   - 确保已安装MySQL数据库服务器
   - 创建名为`laptop_analysis`的数据库（如果不存在）
   - 默认配置使用的是`root`用户无密码连接，如需修改，请编辑`config.py`文件中的数据库连接信息

4. 导入数据
   - 确保CSV数据文件位于`static/data/笔记本电脑_final.csv`
   - 运行以下命令导入数据到MySQL数据库：
```bash
flask import-csv
```

5. 运行应用
```bash
python app.py
```

6. 打开浏览器访问
```
http://127.0.0.1:5000/
```

## 数据要求

系统可以处理包含以下字段的CSV数据文件：

- **价格**：笔记本电脑价格信息（必需）
- **销量**：笔记本电脑销量信息（必需，也可以是付款人数或评论数）
- **标题**：笔记本电脑的标题或名称
- **品牌**：笔记本电脑品牌（如果没有，会从标题中提取）
- **内存**：内存容量信息（如果没有，会从标题中提取）
- **CPU**：处理器信息（如果没有，会从标题中提取）

CSV文件命名为`笔记本电脑_final.csv`，放在`static/data/`目录下。

## 项目结构

```
笔记本电脑数据分析系统/
├── app.py              # 主应用程序
├── config.py           # 配置文件
├── models.py           # 数据库模型
├── migrate_data.py     # 数据迁移脚本
├── requirements.txt    # 依赖包列表
├── README.md           # 项目说明文档
├── static/             # 静态资源
│   ├── data/           # 数据文件
│   │   └── 笔记本电脑_final.csv
│   └── js/             # JavaScript文件
└── templates/          # HTML模板
    └── index.html      # 主页模板
```

## API接口

系统提供以下API接口：

- `/api/data` - 获取所有笔记本电脑数据
- `/api/brand_analysis` - 获取品牌分析数据
- `/api/ram_analysis` - 获取内存分析数据
- `/api/cpu_analysis` - 获取CPU分析数据
- `/api/price_range_analysis` - 获取价格区间分析数据
- `/api/price_prediction` - 价格预测（POST请求）
- `/api/sales_analysis` - 获取销量分析数据
- `/api/price_sales_correlation` - 获取价格与销量关系分析数据

## 数据库迁移说明

本系统已从原来的CSV文件存储方式迁移到MySQL数据库，提高了数据处理效率和系统性能。迁移过程包括：

1. 创建数据库模型（models.py）
2. 配置数据库连接（config.py）
3. 编写数据迁移脚本（migrate_data.py）
4. 使用SQLAlchemy替代pandas进行数据操作
5. 更新所有API接口，使用SQL查询替代DataFrame操作

如果您是从旧版本升级，请确保运行`flask import-csv`命令将数据导入到MySQL数据库。

## 注意事项

- 首次运行时，请确保已正确配置MySQL数据库并导入数据
- 如果遇到数据库连接问题，请检查config.py中的连接信息是否正确
- 系统默认使用UTF-8编码处理数据，如果CSV文件编码不是UTF-8，可能会出现乱码

## 未来改进计划

- 添加用户认证功能
- 支持在线上传和处理CSV数据
- 增加更多数据分析模型和可视化图表
- 优化数据库查询性能
- 添加数据导出功能